# TdidEmbeddingAggregate
salt: "{{ salt | default('TRM') }}"
br_emb_path: "{{ br_emb_path | default('s3://thetradedesk-mlplatform-us-east-1/data/' ~ data_namespace ~ '/audience/RSMV2/emb/raw/v=1/date=' ~ run_date.strftime(version_date_format) ~ '/') }}"
tdid_emb_path: "{{ tdid_emb_path | default('s3://thetradedesk-mlplatform-us-east-1/data/' ~ data_namespace ~ '/audience/RSMV2/emb/agg/v=1/date=' ~ run_date.strftime(version_date_format) ~ '/') }}"
decode_tdid: {{ decode_tdid | default(true) | lower }}
# UploadEmbeddings
emb_bucket_dest: "{{ emb_bucket_dest | default('s3://ttd-user-embeddings/dataexport/' if environment == 'prod' else 's3://thetradedesk-mlplatform-us-east-1/data/prodTest/audience/emb/dataexport/') }}"
nonsensitive_emb_enum: {{ nonsensitive_emb_enum | default(301) }}
sensitive_emb_enum: {{ sensitive_emb_enum | default(302) }}
base_hour: {{ base_hour | default(0) }}
batch_id: {{ batch_id | default(1) }}
# TdidEmbeddingDotProductGeneratorOOS
seed_emb_path: "{{ seed_emb_path | default('s3://thetradedesk-mlplatform-us-east-1/configdata/test/audience/embedding/RSMV2/RSMv2SensitiveDensityTest/v=1/' ~ run_date.strftime(version_date_format) ~ '000000/') }}"
density_feature_path: "{{ density_feature_path | default('s3://thetradedesk-mlplatform-us-east-1/features/feature_store/prod/profiles/source=bidsimpression/index=TDID/job=DailyTDIDDensityScoreSplitJob/v=1/date=' ~ run_date.strftime(version_date_format) ~ '/') }}"
policy_table_path: "{{ policy_table_path | default('s3://thetradedesk-mlplatform-us-east-1/configdata/prod/audience/policyTable/RSM/v=1/' ~ run_date.strftime(version_date_format) ~ '000000/') }}"
seed_id_path: "{{ seed_id_path | default('s3://thetradedesk-mlplatform-us-east-1/data/' ~ data_namespace ~ '/audience/scores/seedids/v=2/date=' ~ run_date.strftime(version_date_format) ~ '/') }}"
dot_product_out_path: "{{ dot_product_out_path | default('s3://thetradedesk-mlplatform-us-east-1/data/' ~ data_namespace ~ '/audience/scores/tdid2seedid_raw/v=1/date=' ~ run_date.strftime(version_date_format) ~ '/') }}"
density_split: {{ density_split | default(-1) }}
density_limit: {{ density_limit | default(-1) }}
tdid_limit: {{ tdid_limit | default(-1) }}
debug: {{ debug | default(false) | lower }}
partition: {{ partition | default(-1) }}
sensitiveModel: {{ sensitiveModel | default(true) | lower }}
minMaxSeedEmb: {{ minMaxSeedEmb | default(1e-6) }}
r: {{ r | default(1e-8) }}
loc_factor: {{ loc_factor | default(0.8) }}
samplingRate: {{ loc_factor | default(3) }}
# TdidSeedScoreScale
raw_score_path: "{{ raw_score_path | default('s3://thetradedesk-mlplatform-us-east-1/data/' ~ data_namespace ~ '/audience/scores/tdid2seedid_raw/v=1/date=' ~ run_date.strftime(version_date_format) ~ '/') }}"
score_scale_out_path: "{{ score_scale_out_path | default('s3://thetradedesk-mlplatform-us-east-1/data/' ~ data_namespace ~ '/audience/scores/tdid2seedid/v=1/date=' ~ run_date.strftime(version_date_format) ~ '/') }}"
population_score_path: "{{ population_score_path | default('s3://thetradedesk-mlplatform-us-east-1/data/' ~ data_namespace ~ '/audience/scores/seedpopulationscore/v=1/date=' ~ run_date.strftime(version_date_format) ~ '/') }}"
smooth_factor: {{ smooth_factor | default(30.0) }}
userLevelUpperCap: {{ userLevelUpperCap | default(1000000.0) }}
accuracy: {{ accuracy | default(1000) }}
sampleRateForPercentile: {{ sampleRateForPercentile | default(0.3) }}
skipPercentile: {{ skipPercentile | default(true) | lower }}
# TdidSeedScoreQualityCheck
daysLookback: {{ daysLookback | default(1) }}
percentileDiffThreshold: {{ percentileDiffThreshold | default(0.002) }}
seedOutlinerPercentThreshold: {{ seedOutlinerPercentThreshold | default(0.05) }}

# common:
runDate: "{{ run_date.strftime(run_date_format) }}"
audienceJarBranch: "{{ audienceJarBranch | default('master') }}"
audienceJarVersion: "{{ audienceJarVersion | default('latest') }}"
